<!DOCTYPE HTML>
<html>
<head>
    <title>JS VERGE</title>

    <script src="engine/Text.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/MapImage.js" type="text/javascript" charset="utf-8"></script>    
    <script src="engine/Map.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/McGrender.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/Keys.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/Engine.js" type="text/javascript" charset="utf-8"></script>

    <script src="engine/jquery/jquery-1.4.4.min.js" type="text/javascript" charset="utf-8"></script>

<script src="engine/soundmanager/soundmanager2-jsmin.js"></script>
<script>
soundManager.url = 'engine/soundmanager/swf/';
soundManager.flashVersion = 9; // optional: shiny features (default = 8)
soundManager.useFlashBlock = false; // optionally, enable when you're ready to dive in
soundManager.debugMode = false;
// enable HTML5 audio support, if you're feeling adventurous. iPad/iPhone will always get this.
// soundManager.useHTML5Audio = true;

soundManager.onready(function() {
  if (soundManager.supported()) {
        soundManager.createSound({
          id: 'mySound',
          url: 'game/mp3/Hymn_to_Aurora_(NES_Cover)_www.dwedit.org.mp3',
          autoLoad: true,
          autoPlay: true,
          onload: function() {
            if($$){
                $$.log('The sound '+this.sID+' loaded!');
            }
          },
          volume: 20
        });
  } else {
    debugger;
  }
});

</script>

    <style>
        * {
            font-family: verdana;
        }

        div.game_container {
            padding: 30px;
            height: 300px;
        }

        #game_canvas {
            image-rendering: optimizespeed;
            background-color: #F0F;
            margin: auto;
        }

        #canvas_container {
            margin: auto;
        }

        #log {
            width: 320px;
            height: 50px;
        }
    </style>

</head>
<body>
    <h1>HTML5/Canvas game experiment (WIP)</h1>
    <p>by <a href="http://gruniverse.com">Grue</a> of <a href="http://verge-rpg.com">VERGE Games</a>.  <a href="https://github.com/mcgrue/js-verge">Available on github</a>  </p>
    <img src="./game/001_v3/GRUE0060.vsp.png" style="width: 0px; height: 0px; " id="tileset" />
    <img src="./game/001_v3/darin.png" style="width: 0px; height: 0px; " id="hero" />
    
    <div class="game_container">
        <div id="canvas_container">
            <p>WASD for some primitive movement.</p>
            <p style="color: red; font-weight: bold;">press 'M' to MUTE.</p>            
            <canvas id="game_canvas"> 
                <h3>This game requires HTML5 and Canvas.</h3>
                <p><a href="http://www.getfirefox.net/">Get Firefox?</a></p>
            </canvas>
        </div>

        <div>
            <textarea id="log"></textarea>
        </div>
    </div>

<!--
    <input value="" id="x">
    <input value="" id="y">
    <button id="move">move</button>
-->
    

    <script>
        var canvas_node = document.getElementById('game_canvas');
        var tileset_node = document.getElementById('tileset');
        new Engine( canvas_node, 320, 240, 1, tileset_node, 'game/001_v3/simpletype_overworld.json', soundManager );

        $('#move').click(
            function() {
                if( $('#x').val() === 'stop' ) {
                    $$.killIntervals();
                } else {
                    $$.camera.x = parseInt( $('#x').val() );
                    $$.camera.y = parseInt( $('#y').val() );
                }
            }
        );
    </script>
</body>
</head>