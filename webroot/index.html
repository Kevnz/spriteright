<!DOCTYPE HTML>
<html>
<head>
    <title>JAVASCRIPT VERGE</title>
    <meta name="description" content="A little HTML5 Canvas Experiment involving VERGE and The Sully Chronicles.">

    <link href="reset.css" type="text/css" media="screen" rel="stylesheet" />

    <script src="engine/Text.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/MapImage.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/MapAnimation.js" type="text/javascript" charset="utf-8"></script>    
    <script src="engine/Map.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/RenderThing.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/McGrender.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/Keys.js" type="text/javascript" charset="utf-8"></script>
    <script src="engine/Engine.js" type="text/javascript" charset="utf-8"></script>

<script src="engine/jquery/jquery-1.4.4.min.js" type="text/javascript" charset="utf-8"></script>
<script src="engine/soundmanager/soundmanager2-jsmin.js"></script>
<script>

soundManager.url = 'engine/soundmanager/swf/';
soundManager.flashVersion = 9; // optional: shiny features (default = 8)
soundManager.useFlashBlock = false; // optionally, enable when you're ready to dive in
soundManager.debugMode = false;
// enable HTML5 audio support, if you're feeling adventurous. iPad/iPhone will always get this.
// soundManager.useHTML5Audio = true;

soundManager.onready(function() {

  if( window.location.href == 'http://localhost/js-verge/' ) return; //I don't want to hear it every time I debug...
  
  if (soundManager.supported()) {
        soundManager.createSound({
          id: 'mySound',
          url: 'game/mp3/Hymn_to_Aurora_(NES_Cover)_www.dwedit.org.mp3',
          autoLoad: true,
          autoPlay: true,
          onload: function() {
            if($$){
                $$.log('The sound '+this.sID+' loaded!');
            }
          },
          volume: 20
        });
  } else {
    debugger;
  }
});

</script>

    <style>
        * {
            font-family: verdana;
        }

        div.game_container {
            padding: 30px;
            height: 300px;
            padding-top: 0px;
        }

        #game_canvas {
            image-rendering: optimizespeed;
            background-color: #F0F;
            margin: auto;
        }

        #canvas_container {
            margin: auto;
            margin-top: 30px;
        }

        #log {
            width: 320px;
            height: 50px;
        }
    </style>

</head>
<body>
    <img src="./game/001_v3/GRUE0060.vsp.png" style="width: 0px; height: 0px; " id="tileset" />
    <img src="./game/001_v3/darin.png" style="width: 0px; height: 0px; " id="hero" />
    <img src="./game/001_v3/speech.png" style="width: 0px; height: 0px; " id="speech" />    
    <div class="game_container">
        <h1>HTML5/Canvas game experiment (WIP)</h1>
        <p>by <a href="http://gruniverse.com">Grue</a> of <a href="http://verge-rpg.com">VERGE Games</a>.  <a href="https://github.com/mcgrue/js-verge">Available on github</a>  </p>

        <div id="canvas_container">
            <p>WASD for some primitive movement.</p>
            <p><span style="color: red; font-weight: bold;">press 'M' to MUTE.</span> Press 'o' to toggle obstructions.<br /><br /></p>
            <canvas id="game_canvas"> 
                <h3>This game requires HTML5 and Canvas.</h3>
                <p><a href="http://www.getfirefox.net/">Get Firefox?</a></p>
            </canvas>
        </div>

        <div>
            <textarea id="log"></textarea>
        </div>

        <p><br /><br />(This version of Horace Wimp's Aurora.mod from <a href=http://www.dwedit.org/nes/nsf.php>http://www.dwedit.org/nes/nsf.php</a>)</p>
    </div>

<!--
    <input value="" id="x">
    <input value="" id="y">
    <button id="move">move</button>
-->
    
    <script>
        var canvas_node = document.getElementById('game_canvas');
        var tileset_node = document.getElementById('tileset');

        new Engine( canvas_node, 320, 240, 1, tileset_node, 'game/001_v3/simpletype_overworld.json', soundManager );

        $('#move').click(
            function() {
                if( $('#x').val() === 'stop' ) {
                    $$.killIntervals();
                } else {
                    $$.camera.x = parseInt( $('#x').val() );
                    $$.camera.y = parseInt( $('#y').val() );
                }
            }
        );
    </script>

    <script type="text/javascript">
    
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-5387635-10']);
      _gaq.push(['_setDomainName', '.javerge.com']);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    
    </script>

    
</body>
</head>